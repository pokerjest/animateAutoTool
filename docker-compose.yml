services:
  animate:
    build: .
    container_name: animate
    restart: unless-stopped
    ports:
      - "8306:8306"
    volumes:
      - ./data:/app/data
      - ./downloads:/downloads # Share downloads folder
    environment:
      - ANIME_SERVER_PORT=8306
      - ANIME_LOG_LEVEL=info
      - TZ=Asia/Shanghai
    depends_on:
      - qbittorrent
    networks:
      - animate-net

  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:latest
    container_name: qbittorrent
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
      - WEBUI_PORT=8080
    volumes:
      - ./qbittorrent/config:/config
      - ./downloads:/downloads
    ports:
      - "8080:8080"
      - "6881:6881"
      - "6881:6881/udp"
    restart: unless-stopped
    networks:
      - animate-net

  alist:
    image: xhofe/alist:latest
    container_name: alist
    restart: unless-stopped
    volumes:
      - ./alist:/opt/alist/data
      - ./downloads:/downloads # Share downloads for mapping
    ports:
      - "5244:5244"
    environment:
      - PUID=1000
      - PGID=1000
      - UMASK=022
    networks:
      - animate-net

networks:
  animate-net:
    driver: bridge
