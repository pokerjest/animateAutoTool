# ğŸ¬ Animate Auto Tool

<div align="center">

![Go Version](https://img.shields.io/badge/Go-1.24-00ADD8?style=for-the-badge&logo=go)
![Version](https://img.shields.io/badge/Version-v0.3.0--Beta-blue?style=for-the-badge)
![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)
![GitHub Workflow Status](https://img.shields.io/github/actions/workflow/status/pokerjest/animateAutoTool/go.yml?style=for-the-badge)

**ä¸€ä¸ªä¼˜é›…çš„åŠ¨æ¼«è‡ªåŠ¨è¿½ç•ªä¸‹è½½å·¥å…·**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨è¯´æ˜](#-ä½¿ç”¨è¯´æ˜) â€¢ [å¼€å‘](#-å¼€å‘)

</div>

---

## ğŸ“– ç®€ä»‹

Animate Auto Tool æ˜¯ä¸€ä¸ªåŸºäº Go å¼€å‘çš„è‡ªåŠ¨åŒ–åŠ¨æ¼«ä¸‹è½½å·¥å…·ï¼Œé€šè¿‡è®¢é˜… [Mikan Project](https://mikanani.me/) çš„ RSS æºï¼Œè‡ªåŠ¨è¿½è¸ªæ‚¨å–œæ¬¢çš„åŠ¨æ¼«æ›´æ–°ï¼Œå¹¶ä½¿ç”¨ qBittorrent è¿›è¡Œä¸‹è½½ç®¡ç†ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- ğŸ¯ **æ™ºèƒ½è®¢é˜…**ï¼šæ”¯æŒ Mikan RSS è®¢é˜…è‡ªåŠ¨åŒæ­¥
- ğŸŒ¸ **å¤šæºå…ƒæ•°æ®**ï¼šèšåˆ Bangumi + TMDB + AniList å…ƒæ•°æ®ï¼Œæ”¯æŒåŒå‘åŒæ­¥
- ğŸš€ **æ— äººå€¼å®ˆ**ï¼šè‡ªåŠ¨æ£€æµ‹æ–°ç•ªæ›´æ–°å¹¶ä¸‹è½½
- ğŸ¨ **ç°ä»£ UI**ï¼šåŸºäº HTMX + Tailwind çš„ç»ç’ƒæ‹Ÿæ€è®¾è®¡
- ğŸ“¦ **å•ä¸€äºŒè¿›åˆ¶**ï¼šæ— éœ€ä¾èµ–ï¼Œå¼€ç®±å³ç”¨
- ğŸ“‚ **ç¦»çº¿å…ƒæ•°æ®**ï¼šè‡ªåŠ¨ç¼“å­˜æµ·æŠ¥ä¸ç®€ä»‹ï¼Œæ”¯æŒå®Œå…¨ç¦»çº¿æŸ¥çœ‹
- ğŸ“‚ **æœ¬åœ°ç®¡ç†**ï¼šæ™ºèƒ½æ‰«æç®¡ç†æœ¬åœ°ç•ªå‰§åº“

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸŒ¸ å…ƒæ•°æ®æ·±åº¦é›†æˆ (æŒç»­å¢å¼º!)
- **å¤šæºèšåˆ**ï¼šå¯é€‰ Bangumi, TMDB æˆ– AniList ä½œä¸ºé¦–é€‰å…ƒæ•°æ®æ¥æºã€‚
- **ç¦»çº¿ç¼“å­˜**ï¼šæ‰€æœ‰æµ·æŠ¥å’Œç®€ä»‹å‡ä»¥ BLOB å½¢å¼å­˜å‚¨äº SQLite ä¸­ï¼Œ**æ— ç½‘ç¯å¢ƒä¹Ÿèƒ½æ­£å¸¸æµè§ˆ**ã€‚
- **å¼ºåˆ¶åˆ·æ–°**ï¼šå•ä½“/å…¨å±€å¼ºåˆ¶åˆ·æ–°å…ƒæ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯å®æ—¶åŒæ­¥ã€‚
- **åŒå‘åŒæ­¥**ï¼šè‡ªåŠ¨åŒæ­¥ Bangumi çš„"åœ¨çœ‹"å’Œ"çœ‹è¿‡"åˆ—è¡¨ã€‚
- **è¿æ¥éªŒè¯**ï¼šBangumi è¿æ¥çŠ¶æ€å®æ—¶æ£€æµ‹ä¸ä¿®å¤ã€‚

### ğŸ“¦ æ‰¹é‡è®¢é˜…
- **æ–‡æœ¬æ‰¹é‡å¯¼å…¥**ï¼šæ”¯æŒ `æ ‡é¢˜ | RSSé“¾æ¥` æ ¼å¼çš„æ‰¹é‡å¯¼å…¥ã€‚
- **UI äº¤äº’æ·»åŠ **ï¼šåœ¨æœç´¢æˆ– Dashboard ä¸­å°†ç•ªå‰§åŠ å…¥"æ‰¹é‡åˆ—è¡¨"ã€‚
- **åˆ†ç»„é¢„è§ˆ**ï¼šæäº¤å‰å¯é¢„è§ˆæ¯ä¸ªè®¢é˜…åŒ…å«çš„å‰§é›†è¯¦æƒ…ï¼Œé˜²æ­¢åŠ é”™ã€‚

### ğŸ›¡ï¸ æ•°æ®å®‰å…¨ä¸å¤‡ä»½
- **Cloudflare R2 å¤‡ä»½**ï¼šæ”¯æŒå°†å…ƒæ•°æ®ã€é…ç½®å’Œè®¢é˜…å¤‡ä»½è‡³ R2 å¯¹è±¡å­˜å‚¨ã€‚
- **é€‰æ‹©æ€§æ¢å¤**ï¼šä»å¤‡ä»½ä¸­æŒ‰éœ€æ¢å¤ç‰¹å®šæ•°æ®ï¼ˆå¦‚ä»…é…ç½®ã€ä»…è®¢é˜…ï¼‰ï¼Œçµæ´»å®‰å…¨ã€‚

### ğŸ“‚ æœ¬åœ°ç•ªå‰§ç®¡ç†
- **ç›®å½•æ‰«æ**ï¼šé…ç½®æœ¬åœ°æ ¹ç›®å½•ï¼Œè‡ªåŠ¨æ‰«æè¯†åˆ«ç•ªå‰§ç³»åˆ—ã€‚
- **ç»Ÿä¸€ç®¡ç†**ï¼šåœ¨ Web ç•Œé¢æŸ¥çœ‹æœ¬åœ°å·²ä¸‹è½½çš„ç•ªå‰§å’Œæ–‡ä»¶ç»Ÿè®¡ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ™ºèƒ½é‡å‘½å**ï¼šæ ¹æ®è§„åˆ™è‡ªåŠ¨é‡å‘½åä¸‹è½½æ–‡ä»¶ï¼Œæ•´æ´åº“æˆ¿ã€‚
- âœ… **ä¸‹è½½å†å²**ï¼šè®°å½•æ‰€æœ‰ä¸‹è½½å†å²ï¼Œé¿å…é‡å¤ä¸‹è½½ã€‚
- âœ… **è¿æ¥æµ‹è¯•**ï¼šä¸€é”®æµ‹è¯• qBittorrent è¿æ¥çŠ¶æ€ï¼›**R2 äº‘å¤‡ä»½è¯»å†™éªŒè¯**ã€‚
- âœ… **å®æ—¶çŠ¶æ€**ï¼šä»ªè¡¨ç›˜å®æ—¶æ˜¾ç¤ºè®¢é˜…å’Œä¸‹è½½çŠ¶æ€ã€‚

### Web ç•Œé¢
- ğŸ¨ **ç°ä»£åŒ–è®¾è®¡**ï¼šç²‰è“é…è‰²ï¼Œå“åº”å¼å¸ƒå±€
- âš¡ **æ— åˆ·æ–°äº¤äº’**ï¼šHTMX é©±åŠ¨çš„æµç•…ä½“éªŒ
- ğŸ‘ï¸ **å¯†ç ç®¡ç†**ï¼šå¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢

---

## ğŸ›  æŠ€æœ¯æ ˆ

| ç±»å‹ | æŠ€æœ¯ |
|------|------|
| **åç«¯** | Go 1.24 + Gin + GORM |
| **æ•°æ®åº“** | SQLite (Pure Go driver) |
| **å‰ç«¯** | HTMX + Alpine.js + Tailwind CSS |
| **ä¸‹è½½å™¨** | qBittorrent Web API |
| **RSS æº** | Mikan Project |
| **å…ƒæ•°æ®æº** | Bangumi / TMDB / AniList |
| **CI/CD** | GitHub Actions (Matrix Build) |

---

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### å‰ç½®è¦æ±‚

- **Go 1.24+** (è¿è¡Œ `go version` æ£€æŸ¥)
- **qBittorrent 4.0+** (éœ€å¼€å¯ Web UI)

> [!NOTE]
> **ä¸­å›½å¤§é™†ç”¨æˆ·è¯·æ³¨æ„**ï¼š
> ç¼–è¯‘å‰è¯·é…ç½® Go ä»£ç†ä»¥ç¡®ä¿é¡ºåˆ©ä¸‹è½½ä¾èµ–ï¼š
> ```bash
> export GOPROXY=https://goproxy.cn,direct
> ```

### âš¡ï¸ ä¸€é”®å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/pokerjest/animateAutoTool.git
cd animateAutoTool

# ç¼–è¯‘å¹¶å¯åŠ¨
./run.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ Go ç‰ˆæœ¬ã€ç¼–è¯‘ä»£ç å¹¶å¯åŠ¨æœåŠ¡ã€‚

#### æ‰‹åŠ¨ç¼–è¯‘
å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨æ§åˆ¶ç¼–è¯‘è¿‡ç¨‹ï¼š

#### é«˜çº§ï¼šæ‰‹åŠ¨ç¼–è¯‘ä¸ç®¡ç†

é¡¹ç›®æ ¹ç›®å½•æä¾›äº†ä¾¿æ·çš„æ§åˆ¶è„šæœ¬ï¼š

```bash
# å¯åŠ¨ (ä¼šè‡ªåŠ¨ç¼–è¯‘)
./start.sh

# åœæ­¢
./stop.sh

# é‡å¯
./restart.sh

# ä»…ç¼–è¯‘
./scripts/control.sh build

# æŸ¥çœ‹çŠ¶æ€
./scripts/control.sh status
```

#### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Docker (æ¨è)

é¡¹ç›®æä¾›äº† `docker-compose.yml`ï¼Œå¯ä¸€é”®å¯åŠ¨ Animate Auto Tool å’Œ qBittorrentã€‚

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/pokerjest/animateAutoTool.git
cd animateAutoTool

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

è®¿é—® `http://localhost:8306` å³å¯ä½¿ç”¨ã€‚
é»˜è®¤é›†æˆäº† qBittorrentï¼ŒWeb UI åœ°å€ä¸º `http://localhost:8080` (ç”¨æˆ·å: `admin`ï¼Œå¯†ç : `adminadmin`)ã€‚


---

## âš™ï¸ é…ç½®

### 1. é…ç½® qBittorrent

ç¡®ä¿ qBittorrent çš„ Web UI å·²å¯ç”¨ï¼š

1. æ‰“å¼€ qBittorrent
2. å·¥å…· â†’ é€‰é¡¹ â†’ Web UI
3. å‹¾é€‰"å¯ç”¨ Web ç”¨æˆ·ç•Œé¢"
4. è®¾ç½®ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰å’Œç”¨æˆ·å/å¯†ç 

### 2. å¯åŠ¨æœåŠ¡

```bash
./animate-server
```

æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:8306`

### 3. Web ç•Œé¢é…ç½®

è®¿é—® `http://localhost:8306/settings` é…ç½®ï¼š

- **qBittorrent Web UI åœ°å€**ï¼šå¦‚ `http://localhost:8080`
- **ç”¨æˆ·å/å¯†ç **ï¼šqBittorrent çš„ Web UI å‡­æ®
- **ä¸‹è½½ä¿å­˜ç›®å½•**ï¼šä¸‹è½½æ–‡ä»¶çš„ä¿å­˜è·¯å¾„
- **å…ƒæ•°æ®é…ç½®**ï¼šé…ç½® TMDB API Token æˆ– AniList Token ä»¥è·å–å¢å¼ºå…ƒæ•°æ®

---

## â“ å¸¸è§é—®é¢˜ (Troubleshooting)

### 1. ç¼–è¯‘å¤±è´¥ï¼šXcode License
å¦‚æœæ‚¨åœ¨ macOS ä¸Šé‡åˆ°ç±»ä¼¼ `You have not agreed to the Xcode...` çš„é”™è¯¯ï¼š
```bash
sudo xcodebuild -license
# æŒ‰ç©ºæ ¼ç¿»é¡µï¼Œæœ€åè¾“å…¥ 'agree'
```

### 2. ç«¯å£å†²çª
å¦‚æœ `8306` ç«¯å£è¢«å ç”¨ï¼Œè¯·ä¿®æ”¹ `config.yaml` æˆ–ç¯å¢ƒå˜é‡ `ANIME_SERVER_PORT`ã€‚

### 3. qBittorrent è¿æ¥å¤±è´¥
è¯·æ£€æŸ¥ qBittorrent Web UI è®¾ç½®ï¼š
- ç¡®ä¿ "å¯¹æœ¬ç¨‹åºç›‘å¬çš„ IP åœ°å€å’Œç«¯å£è¿›è¡Œ CSRF ä¿æŠ¤" **æœªå‹¾é€‰** (æ¨è)
- ç¡®ä¿ Web UI ç«¯å£é…ç½®æ­£ç¡® (é»˜è®¤ 8080)

---

## ğŸ”§ å¼€å‘

### é¡¹ç›®ç»“æ„

```
animateAutoTool/
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ server/          # ä¸»æœåŠ¡å™¨
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/             # HTTP è·¯ç”±å’Œå¤„ç†å™¨
â”‚   â”œâ”€â”€ db/              # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ downloader/      # qBittorrent å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ model/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ parser/          # RSS è§£æå™¨
â”‚   â”œâ”€â”€ scheduler/       # å®šæ—¶ä»»åŠ¡è°ƒåº¦
â”‚   â”œâ”€â”€ service/         # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ bangumi/         # Bangumi API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ tmdb/            # TMDB API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ anilist/         # AniList API å®¢æˆ·ç«¯
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ templates/       # HTML æ¨¡æ¿
â”‚   â””â”€â”€ static/          # é™æ€èµ„æº (CSS/JS)
â””â”€â”€ README.md
```

---

## ğŸ“ å¾…åŠäº‹é¡¹

- [x] Mikan Dashboard èšåˆé¡µ
- [x] æ‰¹é‡è®¢é˜…åŠŸèƒ½
- [x] æœ¬åœ°ç•ªå‰§åº“ç®¡ç†
- [x] TMDB / AniList å¢å¼ºå…ƒæ•°æ®
- [x] å®Œå…¨ç¦»çº¿å…ƒæ•°æ®ç¼“å­˜
- [x] Docker æ”¯æŒ (åŒ…å« qBittorrent ä¸€ä½“åŒ–é•œåƒ)
- [ ] å¤šç”¨æˆ·æ”¯æŒ
- [ ] æ¨é€é€šçŸ¥ï¼ˆWebSocket/Barkï¼‰
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰²æ¨¡å¼ï¼‰

---

## ğŸ¤ è‡´è°¢

- [Mikan Project](https://mikanani.me/) - RSS è®¢é˜…æº
- [qBittorrent](https://www.qbittorrent.org/) - ä¸‹è½½å®¢æˆ·ç«¯
- [HTMX](https://htmx.org/) - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Bangumi](https://bgm.tv/) - åŠ¨æ¼«å…ƒæ•°æ®ä¸åŒæ­¥

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## âš ï¸ å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ï¼Œå°Šé‡ç‰ˆæƒã€‚ä½¿ç”¨æœ¬å·¥å…·äº§ç”Ÿçš„ä»»ä½•æ³•å¾‹é—®é¢˜ä¸ä½œè€…æ— å…³ã€‚

---

<div align="center">

**å¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ by [pokerjest](https://github.com/pokerjest)

</div>

